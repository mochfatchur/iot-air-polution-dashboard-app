{% extends "layouts/base.html" %}

{% block title %} Apex Charts {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">
        <div class="pcoded-content">
            <!-- [ breadcrumb ] start -->
            <!-- <div class="page-header">
        
                    <div class="row align-items-center">
                        
                            <div class="page-header-title">
                                <h5 class="m-b-10">Radial Chart</h5>
                            </div>
                        </div>
            </div> -->
            <!-- [ breadcrumb ] end -->
            <!-- [ Main Content ] start -->
            <div class="row">
                <!-- [ variant-chart ] start -->
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h5>ESP 1</h5>
                        </div>
                        <div class="card-body">
                            <div id="line-chart-1"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <form action="{{url_for('home_blueprint.predict')}}" method="post"></form>
                            <h5>Kategori Kualitas Udara Saat Ini di Area Sekitar ESP32 ID: 1</h5>
                        </div>
                        <div class="card-body">
                            <div id="result-predict"></div>
                            <script>
                                var eventSource = new EventSource("/stream");
                                // Event listener for receiving SSE messages
                                eventSource.onmessage = function(event) {
                                    var prediction = event.data;
                                    document.getElementById("result-predict").innerHTML = prediction;
                                };
                            </script>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- [ variant-chart ] start -->
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h5>ESP 2</h5>
                        </div>
                        <div class="card-body">
                            <div id="line-chart-2"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <form action="{{url_for('home_blueprint.predictdua')}}" method="post"></form>
                            <h5>Kategori Kualitas Udara Saat Ini di Area Sekitar ESP32 ID: 2</h5>
                        </div>
                        <div class="card-body">
                            <div id="result-predict-2"></div>
                            <script>
                                var eventSource = new EventSource("/streamdua");
                                // Event listener for receiving SSE messages
                                eventSource.onmessage = function(event) {
                                    var prediction2 = event.data;
                                    document.getElementById("result-predict-2").innerHTML = prediction2;
                                };
                            </script>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ Main Content ] end -->
        </div>
    </div>
    <!-- [ Main Content ] end -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

    <script src="/static/assets/js/plugins/apexcharts.min.js"></script>
    <script src="/static/assets/js/pages/chart-apex.js"></script>

{% endblock javascripts %}
